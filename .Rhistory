p2<-ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(strip.text.x=element_text(size=8),
legend.title=element_blank(),
legend.position="bottom",
legend.text=element_text(size=7))+
guides(shape=guide_legend(nrow=4,order=1),colour=FALSE,linetype=FALSE)
p2
p2<-ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(strip.text.x=element_text(size=8),
legend.title=element_blank(),
legend.position="bottom",
legend.text=element_text(size=7))+
guides(shape=guide_legend(nrow=2,order=1),colour=FALSE,linetype=FALSE)
p2
p2<-ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank(),
legend.position="bottom")+
guides(shape=guide_legend(nrow=2,order=1),colour=FALSE,linetype=FALSE)
pdf(file="C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/rpi.pdf")
p2<-ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank(),
legend.position="bottom")+
guides(shape=guide_legend(nrow=2,order=1),colour=FALSE,linetype=FALSE)
dev.off()
pdf(file="C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/rpi.pdf")
p2<-ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank(),
legend.position="bottom")+
guides(shape=guide_legend(nrow=2,order=1),colour=FALSE,linetype=FALSE)
dev.off()
pdf(file="C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/rpi.pdf")
ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank(),
legend.position="bottom")+
guides(shape=guide_legend(nrow=2,order=1),colour=FALSE,linetype=FALSE)
dev.off()
ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank(),
legend.position="bottom")+
guides(shape=guide_legend(nrow=2,order=1),colour=guide_legend(override.aes=list(shape = NA)))
ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank())+
guides(shape=guide_legend(nrow=2,order=1),
colour=guide_legend(override.aes=list(shape = NA)))
ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank())+
guides(shape=guide_legend(nrow=4,order=1),
colour=guide_legend(override.aes=list(shape = NA)))
library(reshape)
library(ggplot2)
library(lubridate)
library(scales)
library(gridExtra)
source("./facetAdjust.R")
data<-read.table("C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/weo.txt", dec=',',header=T)
data<-melt(data,id=c("Variable","Pays"))
data<-subset(data,Pays %in% c("Suède","Japon"))
names(data)<-c("variable","pays","year","value")
data$year<-substr(data$year,2,5)
data$year<-year(as.Date(data$year,"%Y"))
levels(data$variable)<-c("Taux de croissance du PIB (%)",
"Productivité  (100=1989)",
"Coûts unit. travail  (100=1989)",
"Niveau des prix (100=1989)",
"Exports (100=1989)",
"Compte courant (% du PIB)",
"R&D (% du PIB)",
"Taux de chômage (%)",
"Dette publique (% du PIB)",
"Recettes publiques (% du PIB)",
"Dépenses publiques (% du PIB)",
"Solde budgétaire (% du PIB)",
"Dette ménages (% du PIB)",
"Dette soc. fin. (% du PIB)",
"Dette soc. non-fin. (% du PIB)")
rpi<-read.table("C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/RPI.txt", dec=',',header=T)
rpi<-melt(rpi,id=c("metavar","variable","pays"))
names(rpi)[4]<-"year"
rpi$year<-substr(rpi$year,2,5)
rpi$year<-year(as.Date(rpi$year,"%Y"))
rpi<-na.omit(rpi)
levels(rpi$metavar)<-c("Indice de Gini","Taux de pauvreté","Revenu disponible (100=1985)")
levels(rpi$variable)<-c("après taxes et transferts","avant taxes et transferts",
"moyen","médian")
mytheme <- theme_bw() + theme(strip.background=element_blank(),
legend.key=element_rect(colour="white"),
#plot.margin=unit(c(.5,.5,.5,.5),"lines"),
panel.border=element_rect(colour="grey"),
axis.text=element_text(size=8))
pdf(file="C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/weo.pdf")
p1<-ggplot(data=data,aes(x=year,y=value,color=pays,group=pays,linetype=pays))+
geom_line(size=0.8)+
facet_wrap(~variable,nrow=4,scales="free_y")+
scale_x_continuous(breaks=pretty_breaks(n=3))+
mytheme+ xlab(NULL) + ylab(NULL)+
theme(strip.text.x=element_text(size=8),
legend.position=c(0.9,0.1),
legend.title=element_blank())
facetAdjust(p1)
dev.off()
pdf(file="C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/rpi.pdf")
ggplot(data=rpi,aes(x=year,y=value,color=pays,shape=variable,linetype=pays))+
geom_point(size=2.5)+geom_line(size=.8)+
facet_wrap(~metavar,nrow=3,scales="free_y")+
mytheme + xlab(NULL) + ylab(NULL)+
theme(legend.title=element_blank())+
guides(shape=guide_legend(nrow=4,order=1),
colour=guide_legend(override.aes=list(shape = NA)))
dev.off()
#pdf(file="C:/Users/Utilisateur/Dropbox/France_10ans/Intro/Data/all.pdf")
#grid.arrange(p1,arrangeGrob(p2,nullGrob(),heights=c(3.25,1)),ncol=2,widths=c(3.5,1))
#dev.off()
install.packages("knitr")
setwd("C:/Users/brand/Dropbox/github/riskshocks")
library(shiny)
runApp()
runApp()
names(dataTable)
names(dataTable)[-1]
runApp()
str(dataTable)
levels(dataTable$names)
runApp()
library(R.matlab)
library(reshape2)
library(plyr)
library(lubridate)
setwd("C:/Users/Brand/Dropbox/cepii_dsge/output")
year<-as.character(seq(as.Date("1988/3/1"), as.Date("2013/6/1"), by = "3 months"))
#dataLevel : rawdata in level (only 9 series, 4 others?)
data<-read.csv("./rawdataLevel.csv",header=T,dec=',',sep=';')
data["time"]<-year
dataLevel<-melt(data,id.vars=c("time","country"))
dataLevel$time<-as.Date(as.character(dataLevel$time))
levels(dataLevel$variable)<-list("Real gdp per capita"="gdp",
"Real consumption per capita"="consumption",
"Real investment per capita"="investment",
"Real credit per capita" = "credit",
"Real networth per capita"="networth",
"Real price of investment"="pinvest",
"Real wage per capita"="wage",
"Gdp deflator"="deflator")
#rawdataCMR : annualized CMR data (data_BAAoverTB.mat)
data<-readMat("rawdataCMR.mat")
year1<-seq(as.Date("1981/12/1"), as.Date("2010/6/1"), by = "3 months")
data<-data.frame(data,time=year1,country="United States (CMR data)",shock="rawdataCMR")
rawdataCMR<-melt(data,id.vars=c("time","country","shock")) #12*118
rawdataCMR$variable<-factor(gsub(".obs","",rawdataCMR$variable,fixed=TRUE))
rawdataCMR<-subset(rawdataCMR,year(time)>1987)
#rawdata4 used in estimation, annualized, with and without mean (13x2x2x102=5304 obs.)
data<-read.csv("./rawdata4.csv",header=T,dec=',',sep=';')
data["time"]<-year
rawdata4<-melt(data,id.vars=c("time","country","shock"))
rawdata4$time<-as.Date(as.character(rawdata4$time))
rawdata4$variable<-factor(gsub("_obs","",rawdata4$variable,fixed=TRUE))
#dataRaw : merge rawdataCMR and rawdata4
dataRaw<-rbind(rawdata4,rawdataCMR) #(5304+1416)
varlist<-list("Growth rate of gdp (year-on-year)"="gdp",
"Growth rate of consumption (year-on-year)"="consumption",
"Growth rate of investment (year-on-year)"="investment",
"Growth rate of credit (year-on-year)" = "credit",
"Growth rate of networth (year-on-year)"="networth",
"Growth rate of price of investment (year-on-year)"="pinvest",
"Wage inflation (year-on-year)"="wage",
"Hours worked per capita (log)"="hours",
"Inflation (year-on-year)"="inflation",
"Short-term risk-free interest rate (APR)"="Re",
"Term premium (APP)"="Spread1",
"Credit spread (APP)"="premium"
)
#,"Government deficit (% of gdp)"="def"
levels(dataRaw$variable)<-varlist
#dataEA
dataEA<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_ea/table4/baseline_withoutdefinobs/cmr_output.mat")
#obsnames contains 12 items (12observed variables)
obsnames<-gsub("_obs","",dataEA[["sim.endonames"]][1:12,],fixed=TRUE)
obsnames<-gsub(" ","",obsnames,fixed=TRUE)
#exonames contains 20 items (12shocks+8news)
exonames<-gsub( " ", "",dataEA[["sim.exonames"]],fixed=TRUE)
datEA<-data.frame()
for (i in 1:length(obsnames)){
datEA<-rbind(datEA,data.frame(variable=obsnames[i],
name=c(exonames,"initial","sumshocks"),
dataEA[["sim"]][i,,]
)
)
}
datEA["country"]<-"Euro Area"
dataUS<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_us/table4/baseline_withoutdefinobs/cmr_output.mat")
prior_shape<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_us/table4/baseline_withoutdefinobs/cmr/prior/definition.mat")[[1]][[1]]
datUS<-data.frame()
for (i in 1:length(obsnames)){
datUS<-rbind(datUS,data.frame(variable=obsnames[i],
name=c(exonames,"initial","sumshocks"),
dataUS[["sim"]][i,,]
)
)
}
datUS["country"]<-"United States"
data<-rbind(datEA,datUS)
names(data)<-c("variable","shock",year,"country")
meltdata<-melt(data,measure.var=year) #(13*2*102*23=60996)
names(meltdata)[4]<-"time"
shocknewsnames<-c("e_sigma","e_xi1","e_xi2","e_xi3","e_xi4","e_xi5","e_xi6","e_xi7","e_xi8")
subdata<-subset(meltdata,shock %in% shocknewsnames)
risk_df<-data.frame(ddply(subdata,.(country,variable,time),summarize,value = sum(value)),shock="risk")
data<-subset(meltdata,!(shock %in% cbind(shocknewsnames,"initial")))
data<-rbind(data,risk_df)
levels(data$shock)<-list("sum of shocks"="sumshocks",
"temporary technology"="e_epsil",
"government consumption"="e_g",
"equity"="e_gamma",
"price markup"="e_lambdaf",
"investment price"="e_muup",
"persistent technology growth"="e_muzstar",
"inflation target"="e_pitarget",
"consumption preferences"="e_zetac",
"investment efficiency"="e_zetai",
"risk"="risk",
"term structure"="e_term",
"monetary policy"="e_xp")
#"transfer"="e_tauf"
data$time<-as.Date(data$time)
data$country<-factor(data$country)
levels(data$variable)<-varlist
dataDecompo<-subset(data,!(shock == "sum of shocks")) #(13*2*102*13=34476)
dataSum<-subset(data,shock == "sum of shocks") #(13*2*102)
#dataTable
dataPost<-data.frame(c(dimnames(dataEA$post.mode[[1]])[[1]],
dimnames(dataEA$post.mode[[2]])[[1]],
dimnames(dataEA$post.mode[[3]])[[1]]),
unlist(dataEA[["post.mode"]]),unlist(dataEA[["post.mean"]]),
unlist(dataEA[["post.hdpinf"]]),unlist(dataEA[["post.hdpsup"]]),
unlist(dataUS[["post.mode"]]),unlist(dataUS[["post.mean"]]),
unlist(dataUS[["post.hdpinf"]]),unlist(dataUS[["post.hdpsup"]]))
names(dataPost)<-c("names","Post. mode EA","Post. mean EA","Prob. Interval 10% EA","Prob. Interval 90% EA","Post. mode US","Post. mean US","Prob. Interval 10% US","Prob. Interval 90% US")
dataPost$names<-gsub(".","_",dataPost$names,fixed=TRUE)
dataPrior<-data.frame(names=unlist(dataUS[["params.names"]]),
prior_shape,
prior_mean=unlist(dataUS[["prior.mean"]]),
prior_stdv=sqrt(diag(unlist(dataUS[["prior.var"]]))))
dataPrior$prior_shape<-factor(dataPrior$prior_shape)
levels(dataPrior$prior_shape)<-list("beta"=1,
"normal"=3,
"Weibull"=4,
"inverse gamma"=6)
names(dataPrior)<-c('names','Prior density','Prior mean','Prior stdv')
levels(dataTable$names)<-list("Monetary policy weight on output growth"="adytil_p",
"Monetary policy weight on inflation"="aptil_p",
"Habit consumption"="b_p",
"Std. dev., temporary technology shock"="e_epsil",
"Std. dev., government consumption shock"="e_g",
"Std. dev., equity shock"="e_gamma",
"Std. dev., price markup shock"="e_lambdaf",
"Std. dev., investment price shock"="e_muup",
"Std. dev., persistent technology shock"="e_muzstar",
"Std. dev., term structure shock"="e_term",
"Std. dev., monetary policy"="e_xp",
"Std. dev., consumption preferences"="e_zetac",
"Std. dev., investment efficiency"="e_zetai",
"Steady state probability of default"="Fomegabar_p",
"Price indexing weight on inflation target"="iota_p",
"Wage indexing weight on persistent technology growth"="iotamu_p",
"Wage indexing weight on inflation target"="iotaw_p",
"Monitoring cost"="mu_p",
"Std. dev., measurement error on networth"="networth_obs",
"Autocorrelation, temporary technology shock"="rhoepsil_p",
"Autocorrelation, government consumption shock"="rhog_p",
"Autocorrelation, price markup shock"="rholambdaf_p",
"Autocorrelation, investment price shock"="rhomuup_p",
"Autocorrelation, persistent technology growth shock"="rhomuzstar_p",
"Autocorrelation, risk shock"="rhosigma_p",
"Autocorrelation, term structure shock"="rhoterm_p",
"Autocorrelation, monetary policy shock"="rhotil_p",
"Autocorrelation, consumption preferences shock"="rhozetac_p",
"Autocorrelation, investment efficiency shock"="rhozetai_p",
"Cruvature, investment adjust cost"="Sdoupr_p",
"Curvature, utilization cost"="sigmaa_p",
"Correlation among signals"="signal_corr_p",
"Std dev., anticipated risk shock"="stdsigma1_p",
"Std dev., unanticipated risk shock"="stdsigma2_p",
"Calvo price stickiness"="xip_p",
"Calvo wage stickiness"="xiw_p")
dataTable<-merge(dataPrior,dataPost,by="names",sort=F)
# data<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_us/table4/baseline_withoutdefinobs/cmr_def_simulated.mat")
# defobssim<-as.data.frame(data[[2]])[22,]
# defobssim<-as.data.frame(t(defobssim))
# year<-seq(as.Date("1988/3/1"), as.Date("2013/6/1"), by = "3 months")
# defobssim["time"]<-year
# defobssim["rawdata"]<-subset(dataRaw,country=="United States" & shock == "rawdata (without mean)" & variable == "def")$value
# names(defobssim)[1]<-"deficit in CMR"
# dataDefSim<-melt(defobssim,measure.vars=c("deficit in CMR","rawdata"))
save(obsnames,dataLevel,dataRaw,dataDecompo,dataSum,dataTable,file="C:/Users/brand/Dropbox/github/riskshocks/data.RData")
#,dataDefSim
#Sys.setlocale("LC_TIME", "English_United States.1252")
#library(devtools)
#install_github('rstudio/shinyapps')
#library(shinyapps)
#deployApp()
library(shiny)
setwd("C:/Users/brand/Dropbox/github/riskshocks")
runApp()
dataTable
library(R.matlab)
library(reshape2)
library(plyr)
library(lubridate)
setwd("C:/Users/Brand/Dropbox/cepii_dsge/output")
year<-as.character(seq(as.Date("1988/3/1"), as.Date("2013/6/1"), by = "3 months"))
#dataLevel : rawdata in level (only 9 series, 4 others?)
data<-read.csv("./rawdataLevel.csv",header=T,dec=',',sep=';')
data["time"]<-year
dataLevel<-melt(data,id.vars=c("time","country"))
dataLevel$time<-as.Date(as.character(dataLevel$time))
levels(dataLevel$variable)<-list("Real gdp per capita"="gdp",
"Real consumption per capita"="consumption",
"Real investment per capita"="investment",
"Real credit per capita" = "credit",
"Real networth per capita"="networth",
"Real price of investment"="pinvest",
"Real wage per capita"="wage",
"Gdp deflator"="deflator")
#rawdataCMR : annualized CMR data (data_BAAoverTB.mat)
data<-readMat("rawdataCMR.mat")
year1<-seq(as.Date("1981/12/1"), as.Date("2010/6/1"), by = "3 months")
data<-data.frame(data,time=year1,country="United States (CMR data)",shock="rawdataCMR")
rawdataCMR<-melt(data,id.vars=c("time","country","shock")) #12*118
rawdataCMR$variable<-factor(gsub(".obs","",rawdataCMR$variable,fixed=TRUE))
rawdataCMR<-subset(rawdataCMR,year(time)>1987)
#rawdata4 used in estimation, annualized, with and without mean (13x2x2x102=5304 obs.)
data<-read.csv("./rawdata4.csv",header=T,dec=',',sep=';')
data["time"]<-year
rawdata4<-melt(data,id.vars=c("time","country","shock"))
rawdata4$time<-as.Date(as.character(rawdata4$time))
rawdata4$variable<-factor(gsub("_obs","",rawdata4$variable,fixed=TRUE))
#dataRaw : merge rawdataCMR and rawdata4
dataRaw<-rbind(rawdata4,rawdataCMR) #(5304+1416)
varlist<-list("Growth rate of gdp (year-on-year)"="gdp",
"Growth rate of consumption (year-on-year)"="consumption",
"Growth rate of investment (year-on-year)"="investment",
"Growth rate of credit (year-on-year)" = "credit",
"Growth rate of networth (year-on-year)"="networth",
"Growth rate of price of investment (year-on-year)"="pinvest",
"Wage inflation (year-on-year)"="wage",
"Hours worked per capita (log)"="hours",
"Inflation (year-on-year)"="inflation",
"Short-term risk-free interest rate (APR)"="Re",
"Term premium (APP)"="Spread1",
"Credit spread (APP)"="premium"
)
#,"Government deficit (% of gdp)"="def"
levels(dataRaw$variable)<-varlist
#dataEA
dataEA<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_ea/table4/baseline_withoutdefinobs/cmr_output.mat")
#obsnames contains 12 items (12observed variables)
obsnames<-gsub("_obs","",dataEA[["sim.endonames"]][1:12,],fixed=TRUE)
obsnames<-gsub(" ","",obsnames,fixed=TRUE)
#exonames contains 20 items (12shocks+8news)
exonames<-gsub( " ", "",dataEA[["sim.exonames"]],fixed=TRUE)
datEA<-data.frame()
for (i in 1:length(obsnames)){
datEA<-rbind(datEA,data.frame(variable=obsnames[i],
name=c(exonames,"initial","sumshocks"),
dataEA[["sim"]][i,,]
)
)
}
datEA["country"]<-"Euro Area"
dataUS<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_us/table4/baseline_withoutdefinobs/cmr_output.mat")
prior_shape<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_us/table4/baseline_withoutdefinobs/cmr/prior/definition.mat")[[1]][[1]]
datUS<-data.frame()
for (i in 1:length(obsnames)){
datUS<-rbind(datUS,data.frame(variable=obsnames[i],
name=c(exonames,"initial","sumshocks"),
dataUS[["sim"]][i,,]
)
)
}
datUS["country"]<-"United States"
data<-rbind(datEA,datUS)
names(data)<-c("variable","shock",year,"country")
meltdata<-melt(data,measure.var=year) #(13*2*102*23=60996)
names(meltdata)[4]<-"time"
shocknewsnames<-c("e_sigma","e_xi1","e_xi2","e_xi3","e_xi4","e_xi5","e_xi6","e_xi7","e_xi8")
subdata<-subset(meltdata,shock %in% shocknewsnames)
risk_df<-data.frame(ddply(subdata,.(country,variable,time),summarize,value = sum(value)),shock="risk")
data<-subset(meltdata,!(shock %in% cbind(shocknewsnames,"initial")))
data<-rbind(data,risk_df)
levels(data$shock)<-list("sum of shocks"="sumshocks",
"temporary technology"="e_epsil",
"government consumption"="e_g",
"equity"="e_gamma",
"price markup"="e_lambdaf",
"investment price"="e_muup",
"persistent technology growth"="e_muzstar",
"inflation target"="e_pitarget",
"consumption preferences"="e_zetac",
"investment efficiency"="e_zetai",
"risk"="risk",
"term structure"="e_term",
"monetary policy"="e_xp")
#"transfer"="e_tauf"
data$time<-as.Date(data$time)
data$country<-factor(data$country)
levels(data$variable)<-varlist
dataDecompo<-subset(data,!(shock == "sum of shocks")) #(13*2*102*13=34476)
dataSum<-subset(data,shock == "sum of shocks") #(13*2*102)
#dataTable
dataPost<-data.frame(c(dimnames(dataEA$post.mode[[1]])[[1]],
dimnames(dataEA$post.mode[[2]])[[1]],
dimnames(dataEA$post.mode[[3]])[[1]]),
unlist(dataEA[["post.mode"]]),unlist(dataEA[["post.mean"]]),
unlist(dataEA[["post.hdpinf"]]),unlist(dataEA[["post.hdpsup"]]),
unlist(dataUS[["post.mode"]]),unlist(dataUS[["post.mean"]]),
unlist(dataUS[["post.hdpinf"]]),unlist(dataUS[["post.hdpsup"]]))
names(dataPost)<-c("names","Post. mode EA","Post. mean EA","Prob. Interval 10% EA","Prob. Interval 90% EA","Post. mode US","Post. mean US","Prob. Interval 10% US","Prob. Interval 90% US")
dataPost$names<-gsub(".","_",dataPost$names,fixed=TRUE)
dataPrior<-data.frame(names=unlist(dataUS[["params.names"]]),
prior_shape,
prior_mean=unlist(dataUS[["prior.mean"]]),
prior_stdv=sqrt(diag(unlist(dataUS[["prior.var"]]))))
dataPrior$prior_shape<-factor(dataPrior$prior_shape)
levels(dataPrior$prior_shape)<-list("beta"=1,
"normal"=3,
"Weibull"=4,
"inverse gamma"=6)
names(dataPrior)<-c('names','Prior density','Prior mean','Prior stdv')
dataTable<-merge(dataPrior,dataPost,by="names",sort=F)
levels(dataTable$names)<-list("Monetary policy weight on output growth"="adytil_p",
"Monetary policy weight on inflation"="aptil_p",
"Consumption habits"="b_p",
"Std. dev., temporary technology shock"="e_epsil",
"Std. dev., government consumption shock"="e_g",
"Std. dev., equity shock"="e_gamma",
"Std. dev., price markup shock"="e_lambdaf",
"Std. dev., investment price shock"="e_muup",
"Std. dev., persistent technology shock"="e_muzstar",
"Std. dev., term structure shock"="e_term",
"Std. dev., monetary policy"="e_xp",
"Std. dev., consumption preferences"="e_zetac",
"Std. dev., investment efficiency"="e_zetai",
"Steady state probability of default"="Fomegabar_p",
"Price indexing weight on inflation target"="iota_p",
"Wage indexing weight on persistent technology growth"="iotamu_p",
"Wage indexing weight on inflation target"="iotaw_p",
"Monitoring cost"="mu_p",
"Std. dev., measurement error on networth"="networth_obs",
"Autocorrelation, temporary technology shock"="rhoepsil_p",
"Autocorrelation, government consumption shock"="rhog_p",
"Autocorrelation, price markup shock"="rholambdaf_p",
"Autocorrelation, investment price shock"="rhomuup_p",
"Autocorrelation, persistent technology growth shock"="rhomuzstar_p",
"Autocorrelation, risk shock"="rhosigma_p",
"Autocorrelation, term structure shock"="rhoterm_p",
"Autocorrelation, monetary policy shock"="rhotil_p",
"Autocorrelation, consumption preferences shock"="rhozetac_p",
"Autocorrelation, investment efficiency shock"="rhozetai_p",
"Curvature, investment adjust cost"="Sdoupr_p",
"Curvature, utilization cost"="sigmaa_p",
"Correlation among signals"="signal_corr_p",
"Std dev., anticipated risk shock"="stdsigma1_p",
"Std dev., unanticipated risk shock"="stdsigma2_p",
"Calvo price stickiness"="xip_p",
"Calvo wage stickiness"="xiw_p")
# data<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_us/table4/baseline_withoutdefinobs/cmr_def_simulated.mat")
# defobssim<-as.data.frame(data[[2]])[22,]
# defobssim<-as.data.frame(t(defobssim))
# year<-seq(as.Date("1988/3/1"), as.Date("2013/6/1"), by = "3 months")
# defobssim["time"]<-year
# defobssim["rawdata"]<-subset(dataRaw,country=="United States" & shock == "rawdata (without mean)" & variable == "def")$value
# names(defobssim)[1]<-"deficit in CMR"
# dataDefSim<-melt(defobssim,measure.vars=c("deficit in CMR","rawdata"))
save(obsnames,dataLevel,dataRaw,dataDecompo,dataSum,dataTable,file="C:/Users/brand/Dropbox/github/riskshocks/data.RData")
#,dataDefSim
#Sys.setlocale("LC_TIME", "English_United States.1252")
#library(devtools)
#install_github('rstudio/shinyapps')
#library(shinyapps)
#deployApp()
library(shiny)
setwd("C:/Users/brand/Dropbox/github/riskshocks")
runApp()
dataSimLevEA<-readMat("C:/Users/brand/Dropbox/cepii_dsge/cmrfiles_deficit/cmrfiles_ea/dynare_code/cmr_output.mat")
dataSimLevEA[["sim.lev"]]
truc<-dataSimLevEA[["sim.lev"]]
